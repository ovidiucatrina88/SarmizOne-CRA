# Optional Docker Compose file for development
# Production deployment uses direct Docker commands
version: '3.8'

services:
  # Risk Quantification Application (connects to external database)
  risk-app:
    build: 
      context: .
      dockerfile: Dockerfile
    container_name: risk-quantification-app
    environment:
      NODE_ENV: development
      DATABASE_URL: ${DATABASE_URL}
      PGHOST: ${PGHOST}
      PGPORT: ${PGPORT}
      PGUSER: ${PGUSER}
      PGPASSWORD: ${PGPASSWORD}
      PGDATABASE: ${PGDATABASE}
      SESSION_SECRET: ${SESSION_SECRET:-dev_session_secret}
      BYPASS_AUTH: true
      HOST: ${HOST:-0.0.0.0}
      PORT: ${PORT:-5000}
    ports:
      - "${PORT:-5000}:${PORT:-5000}"
    restart: unless-stopped
    # Add host for external database connectivity
    extra_hosts:
      - "host.docker.internal:host-gateway"